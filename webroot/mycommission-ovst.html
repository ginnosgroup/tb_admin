<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="renderer" content="webkit">
		<link rel="shortcut icon" href="img/favicon.ico">
		<title>我的佣金报表</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/bootstrap-reset.css" rel="stylesheet">
		<link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet">
		<link href="assets/advanced-datatable/media/css/demo_table.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="assets/bootstrap-datepicker/css/datepicker.css"><!-- BOOTSTRAP DATEPICKER PLUGIN CSS -->
		<link rel="stylesheet" type="text/css" href="assets/bootstrap-timepicker/compiled/timepicker.css"><!-- BOOTSTRAP TIMEPICKER PLUGIN CSS -->		
		<link rel="stylesheet" type="text/css" href="css/jquery.autocompleter.css">
		<link href="css/style.css" rel="stylesheet">
		<link href="css/style-responsive.css" rel="stylesheet">
		<link href="css/index.css" rel="stylesheet">
		<!--[if lt IE 9]>
			<script src="js/html5shiv.js"></script>
			<script src="js/respond.min.js"></script>
		<![endif]-->
	</head>

	<body id="mycommission-ovst" v-cloak>
		<section id="container">
			<header class="header white-bg">
				<div class="sidebar-toggle-box">
					<div data-placement="right" class="fa fa-bars tooltips">
					</div>
				</div>
				<a href="main.html" class="logo">
					佣金系统
					<span v-if="ap_list==='KJ'">
           	 会计
          </span>
          <span v-if="ap_list==='GW'">
           	 顾问
          </span>
          <span v-if="ap_list==='WA'">
           	 文案
          </span>
          <span v-if="ap_list==='MA'">
           	 Mara
          </span>
          <span v-if="ap_list!=='KJ' && ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'">
           	 超级管理员
          </span>
				</a>
				<div class="top-nav ">
					<ul class="nav pull-right top-menu">
						<li class="dropdown">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<span class="username">
                  {{admin}}
                </span>
								<b class="caret">
                </b>
							</a>
							<ul class="dropdown-menu extended logout">
								<li class="log-arrow-up">
								</li>
								<li>
									<a href="password.html">
										<i class="fa fa-key">
                    </i> 修改密码
									</a>
								</li>
								<li><a href="javascript:tb.out();">
										<i class="fa fa-user">
                    </i> Log Out
									</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</header>
			<aside>
				<div id="sidebar" class="nav-collapse">
					<ul class="sidebar-menu" id="nav-accordion">
						<li >
              <a href="main.html">
                <i class="fa fa-dashboard">
                </i>
                <span>
                  Dashboard
                </span>
              </a>
            </li>
            <dli v-if="ap_list!=='KJ' && ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'">            
            <li>
              <a href="adviser.html">
                <i class="fa fa-book">
                </i>
                <span>
                  顾问管理
                </span>
              </a>
            </li>
            <li>
              <a href="official.html">
                <i class="fa fa-book">
                </i>
                <span>
                  文案管理
                </span>
              </a>
            </li>
            <li>
              <a href="mara.html">
                <i class="fa fa-book">
                </i>
                <span>
                  MARA管理
                </span>
              </a>
            </li>
            <li>
              <a href="accounting.html">
                <i class="fa fa-book">
                </i>
                <span>
                  会计管理
                </span>
              </a>
            </li>
            <li class="sub-menu">
							<a href="javascript:;">
								<i class="fa fa-book">
                </i>
								<span>
                 	 学校管理
                </span>
							</a>
							<ul class="sub">
								<li>
									<a href="school.html">
										学校管理
									</a>
								</li>
								<li>
									<a href="school-setting.html">
										佣金设置
									</a>
								</li>								
							</ul>
						</li>
            <li>
              <a href="receive-type.html">
                <i class="fa fa-book">
                </i>
                <span>
                  收款方式管理
                </span>
              </a>
            </li>
            <li>
              <a href="subagency.html">
                <i class="fa fa-book">
                </i>
                <span>
                  Subagency管理
                </span>
              </a>
            </li>
            <li>
              <a href="service.html">
                <i class="fa fa-book">
                </i>
                <span>
                  服务项目管理
                </span>
              </a>
            </li>
          	</dli>
          	<li v-if="ap_list!=='KJ' && ap_list!=='MA'" class="sub-menu">
							<a href="javascript:;">
								<i class="fa fa-book">
                </i>
								<span>
                 	 客户管理
                </span>
							</a>
							<ul class="sub">
								<li>
									<a href="users.html">
										客户管理
									</a>
								</li>
								<li v-if="ap_list!=='KJ' && ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'">
									<a href="user-tags.html">
										标签管理
									</a>
								</li>								
							</ul>
						</li>
						<li v-if="ap_list!=='KJ'" class="sub-menu">
							<a href="serviceorder-list.html">
                <i class="fa fa-book">
                </i>
                <span>
                  服务订单管理
                </span>
              </a>
						</li>
            <li v-if="ap_list!=='KJ' && ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'" class="sub-menu">
							<a href="javascript:;">
								<i class="fa fa-book">
                </i>
								<span>
                 	 渠道管理
                </span>
							</a>
							<ul class="sub">
								<li>
									<a href="source.html">
										渠道列表
									</a>
								</li>
								<li>
									<a href="source-type.html">
										来源分类
									</a>
								</li>								
							</ul>
						</li>
						<li v-if="ap_list!=='WA' && ap_list!=='MA'" class="sub-menu">
							<a href="javascript:;" class="active">
								<i class="fa fa-book">
                </i>
								<span>
                 	 佣金表
                </span>
							</a>
							<ul class="sub">								
								<li v-if="ap_list==='GW'" class="active">
									<a href="mycommission.html">
										我的佣金报表
									</a>									
								</li>
								<li v-if="ap_list==='KJ'" id="commission_state_DJY">
									<a href="mycommission-accounting.html?commission_state=DJY">
										待结佣订单
									</a>									
								</li>
								<li v-if="ap_list==='KJ'" id="commission_state_YJY">
									<a href="mycommission-accounting.html?commission_state=YJY">
										已结佣订单
									</a>									
								</li>
								<li v-if="ap_list==='KJ'" id="commission_state_DZY">
									<a href="mycommission-accounting.html?commission_state=DZY">
										待追佣订单
									</a>									
								</li>	
								<li v-if="ap_list==='KJ'" id="commission_state_YZY">
									<a href="mycommission-accounting.html?commission_state=YZY">
										已追佣订单
									</a>									
								</li>
								<li v-if="ap_list==='KJ'" id="commission_state_TQKY">
									<a href="mycommission-accounting.html?commission_state=TQKY">
										提前扣佣订单
									</a>									
								</li>
								<li v-if="ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'">
									<a href="table-export.html">
										导出数据
									</a>
								</li>
							</ul>
						</li>
						<li class="sub-menu">
							<a href="javascript:;">
								<i class="fa fa-book">
                </i>
								<span>
                 	 知识库
                </span>
							</a>
							<ul class="sub">
								<li v-if="ap_list!=='KJ' && ap_list!=='GW' && ap_list!=='WA' && ap_list!=='MA'">
									<a href="knowledge-menu.html">
										菜单管理
									</a>
								</li>
								{{{m_list}}}							
							</ul>
						</li>
					</ul>
				</div>
			</aside>
			<section id="main-content" class="content">
				<section class="wrapper site-min-height">
					<div class="row">
						<div class="col-lg-12">
							<section class="panel">
								<header class="panel-heading">
									我的佣金报表
								</header>
								<div class="panel-body">
									<div class="adv-table editable-table">
										<div id="alert_success" class="alert alert-success fade in" style="display:none;position:absolute;z-index:9999;">
									      <button data-dismiss="alert" class="close close-sm" type="button">
									      </button>
									      <strong>Success!</strong> You  just achieved success.
									  </div>
									  <div id="alert_error" class="alert alert-block alert-danger fade in" style="display:none;position:absolute;z-index:9999;">
                      <button data-dismiss="alert" class="close close-sm" type="button">                      
                      </button>
                      <strong id="error_info"></strong>
                    </div>
									  <form class="form-inline" style="margin-top:10px;">
									  	<input v-model.trim="userId" type="hidden" name="userId" id="userId" value="0" />
											<div class="form-group">
													<label>客户姓名</label>
													<input type="text" name="user_name" id="user_name" class="form-control" style="width:150px;">													
											</div>
											<div class="form-group">
													<label>服务项目</label>											
													<select id="type" class="form-control" style="width:130px;" onchange="gotoUrl(this.value);">
													<option value="OVST" selected="true">留学</option>
													<option value="VISA">签证</option>													
													</select>
													<label>状态</label>											
													<select v-model.trim="state" id="state" class="form-control" style="width:130px;">
													<option value="" selected="true">全部</option>
													<option value="PENDING">佣金待确认</option>
													<option value="REVIEW">佣金审核中</option>
													<option value="WAIT">佣金被驳回</option>
													<option value="FINISH">佣金已审核</option>
													<option value="COMPLETE">佣金结算完成</option>													
													<option value="CLOSE">已关闭</option>
													</select>													
											</div>
											<div class="form-group">
												<button @click="getSearch" type="button" class="btn btn-info">查询</button>
												<button @click="getExport" type="button" class="btn btn-primary">导出</button>
											</div>
										</form>
										<div class="responsive-table margin-top">
											<input type="hidden" name="id" id="id" value="0" />
											<table class="display table table-bordered table-striped" id="list_ovst" style="width:2500px;">
												<thead>
													<tr>
														<th>订单ID</th>
														<th>创建日期</th>
														<th>签约日期</th>
														<th>客户支付日期</th>
														<th>客户姓名</th>
														<th>StudentID</th>
														<th>服务项目</th>
														<th>是否提前扣佣</th>
														<th>学校</th>
														<th>课程</th>
														<th>Installment Due Date</th>
														<th>收款方式</th>
														<th>学费总金额Tuition Fee</th>
														<th>每学期学费金额Per Term Tuition Fee</th>
														<th>总计应收</th>
														<th><span style="color:#FF6C60;">总计已收</span></th>											
														<th>本次收款</th>
														<th>预收业绩(<span style="color:#FF6C60;">Commission含GST</span>)</th>														
														<th>月奖</th>														
														<th>月奖支付时间</th>
														<th>顾问</th>
														<th>状态</th>
														<th>操作</th>
														<th>备注</th>
													</tr>
												</thead>
												<tbody>
													<tr v-for="item in subject" class="gradeX">
														<td v-html="item.strOid"></td>
														<td v-html="item.gmtCreate"></td>
														<td v-html="item.finishDate"></td>
														<td v-html="item.receiveDate"></td>
														<td v-html="item.userName"></td>
														<td v-html="item.studentCode"></td>
														<td v-html="item.serviceName"></td>
														<td v-html="item.strSettle"></td>
														<td v-html="item.schoolName"></td>
														<td v-html="item.schoolSubject"></td>
														<td v-html="item.installmentDueDate"></td>
														<td v-html="item.receiveType.name"></td>
														<td v-html="item.tuitionFee"></td>
														<td v-html="item.perAmount"></td>
														<td v-html="item.totalPerAmount"></td>
														<td v-html="item.totalAmount"></td>
														<td v-html="item.amount"></td>
														<td v-html="item.expectAmount"></td>
														<td v-html="item.bonus"></td>														
														<td v-html="item.bonusDate"></td>
														<td v-html="item.adviser.name"></td>
														<td v-html="item.strState"></td>
														<td>
														<a href="javascript:open_detail({{item.serviceOrderId}},{{item.oid}});">查看</a>
														<dle v-if="ap_list==='GW'">
																<d1 v-if="item.currentState==='PENDING' || item.currentState==='WAIT'">
																		<a href="javascript:reqCommissionOvst({{item.serviceOrderId}},{{item.oid}})"><span style="color:blue;">申请佣金</span></a>
																</d1>
														</dle>
														</td>
														<td v-html="item.remarks"></td>
													</tr>
													<tr class="gradeX">
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td bgcolor="#F4A460">合计：</td>
														<td bgcolor="#F4A460">{{total_expectamount}}</td>
														<td bgcolor="#F4A460">{{total_bonus}}</td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
														<td></td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="row-fluid" style="display:;">
											<div class="span6">
												<div class="dataTables_info" id="hidden-table-info_info">共{{count}}条</div>
											</div>
											<div class="span6">
												<div class="dataTables_paginate paging_bootstrap pagination">
													<ul>
														<li :class="[pageNum==0?'disabled':'']">
															<a @click="firstPage" href="javascript:;">首页</a>
														</li>
														<li :class="[pageNum==0?'disabled':'']">
															<a @click="prevPage" href="javascript:;">← Pre</a>
														</li>
														<li class="nowPage">
															第{{pageNum+1}}页
														</li>
														<li :class="[pageNum==allPage-1?'disabled':'']">
															<a @click="nextPage" href="javascript:;">Next → </a>
														</li>
														<li :class="[pageNum==allPage-1?'disabled':'']">
															<a @click="lastPage" href="javascript:;">末页</a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</section>
						</div>
					</div>
				</section>
			</section>
			<footer class="site-footer">
				<div class="text-center">
					2018 &copy; 佣金系统 by <span style="color:#2a8ba7;">GIG</span>.
					<a href="#" class="go-top">
						<i class="fa fa-angle-up">
            </i>
					</a>
				</div>
			</footer>
		</section>
		<div class="modal fade" id="showconfirmbox_id" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="z-index:9999;">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">操作提示</h4>
					</div>
					<div class="modal-body">
						您确认执行此操作吗？
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button onclick="update_state();" type="button" class="btn btn-primary">确认</button>
					</div>
				</div>
			</div>
		</div>		
		<div id="load-mycommission-ovst-page"></div>
		<div id="load-mycommission-ovst-view-page"></div>
		<script src="js/jquery-1.8.3.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.dcjqaccordion.2.7.js"></script>
		<script src="js/jquery.scrollTo.min.js"></script>
		<script src="js/jquery.nicescroll.js"></script>
		<script src="assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script><!-- BOOTSTRAP DATEPICKER JS  -->
    <script src="assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script><!-- BOOTSTRAP DATETIMEPICKER JS  -->
    <script src="js/jquery.autocompleter.js"></script>
		<script src="js/common-scripts.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/common.js?verson=1"></script>
		<script>
			$("#load-mycommission-ovst-page").load("mycommission-ovst-common.html?random="+Math.random());
			$("#load-mycommission-ovst-view-page").load("mycommission-ovst-common-view.html?random="+Math.random());
			tb.isLogin("mycommission-ovst.html");
			$("td,th").addClass("text-center");
			var v = new Vue({
				el: '#mycommission-ovst',
				data: {
					admin: sessionStorage.getItem("admin"),
					ap_list: sessionStorage.getItem("ap_list"),
					m_list: localStorage.getItem("str_html"),
					adviser_id: sessionStorage.getItem("adviser_id"),
					official_id: sessionStorage.getItem("official_id"),
					mara_id: sessionStorage.getItem("mara_id"),
					kj_id: sessionStorage.getItem("kj_id"),										
					orderId: 0,
					total_expectamount: 0.00,
					total_bonus: 0.00,
					order_detail: [],
					subject: [],
					count: 0,					
					name: '',					
					state: '',					
					pageNum: 0,
					pageSize: 20,
					allPage: 0					
				},
				created: function() {
					this.getDatalist();
				},
				methods: {					
					getDatalist: function() {
						var that = this;
						$.get(url + "commissionOrder/count", {
							keyword: that.name,							
						}, function(result) {
							that.count = result.data;
							that.allPage = Math.ceil(result.data / that.pageSize);
						});
						$.get(url + "commissionOrder/list", {
							pageNum: 0,
							pageSize: that.pageSize,
						}, function(result) {							
							that.pageNum = 0;
							result.data = return_result(result);
							that.subject = result.data;
							//console.log(that.subject);
						});
					},
					getSearch: function() {
						var that = this;
						var json = {};
						if (that.userId != '0') json['userId'] = that.userId;
						if (that.adviserId != '0') json['adviserId'] = that.adviserId;						
						if (that.type != '') json['type'] = that.type;
						if (that.state != '') json['state'] = that.state;
						$.get(url + "commissionOrder/count", json, function(result) {
							that.count = result.data;
							that.allPage = Math.ceil(result.data / that.pageSize);
						});
						json['pageNum'] = 0;
						json['pageSize'] = that.pageSize;
						$.get(url + "commissionOrder/list", json, function(result) {
							that.pageNum = 0;
							result.data = return_result(result);
							that.subject = result.data;
						});
					},
					getTime: function(d) {
						var date1 = new Date(d);
						var y = date1.getFullYear();
						var m = this.addZero(date1.getMonth() + 1);
						var d = this.addZero(date1.getDate());
						var h = this.addZero(date1.getHours());
						var m2 = this.addZero(date1.getMinutes());
						var s = this.addZero(date1.getSeconds());
						//var date2 = y + "-" + m + "-" + d;
						var date2 = d+"/"+m+"/"+y;
						return date2;
					},
					addZero: function(obj) {
						if(obj < 10) {
							obj = '0' + obj;
						};
						return obj;
					},
					firstPage: function() {
						var that = this;
						if(that.pageNum > 0) {
							$.get(url + "commissionOrder/list", {
								keyword: that.name,
								state: that.state,
								pageNum: 0,
								pageSize: that.pageSize
							}, function(result) {
								console.log(result)
								that.pageNum = 0;
								result.data = return_result(result);
								that.subject = result.data;
							});
						}
					},
					prevPage: function() {
						var that = this;
						if(that.pageNum > 0) {
							that.pageNum--;
							$.get(url + "commissionOrder/list", {
								keyword: that.name,
								pageNum: that.pageNum,
								pageSize: that.pageSize
							}, function(result) {
								console.log(result)
								result.data = return_result(result);
								that.subject = result.data;
							});
						}
					},
					nextPage: function() {
						var that = this;
						if(that.pageNum < that.allPage - 1) {
							that.pageNum++;
							$.get(url + "commissionOrder/list", {
								keyword: that.name,
								categoryId: that.sort,
								state: that.state,
								pageNum: that.pageNum,
								pageSize: that.pageSize
							}, function(result) {
								console.log(result)
								result.data = return_result(result);
								that.subject = result.data;
							});
						}
					},
					lastPage: function() {
						var that = this;
						if(that.pageNum < that.allPage - 1) {
							$.get(url + "commissionOrder/list", {
								keyword: that.name,
								categoryId: that.sort,
								state: that.state,
								pageNum: that.allPage - 1,
								pageSize: that.pageSize
							}, function(result) {
								console.log(result)
								that.pageNum = that.allPage - 1;
								result.data = return_result(result);
								that.subject = result.data;
							});
						}
					}          
				}		
			});
			
			function return_result(result)
			{
				v.total_expectamount = 0;
				v.total_bonus = 0;
				for(var i = 0; i < result.data.length; i++) {
						var str_state = '';
						result.data[i].oid = result.data[i].id;
						result.data[i].strOid = '<a href="javascript:open_detail('+result.data[i].serviceOrderId+','+result.data[i].id+');" title="查看详细">'+result.data[i].id+'</a>-'+result.data[i].installmentNum;
						result.data[i].gmtCreate = v.getTime(result.data[i].gmtCreate);
						result.data[i].finishDate = result.data[i].finishDate ? v.getTime(result.data[i].finishDate):'';
						result.data[i].receiveDate = result.data[i].receiveDate ? v.getTime(result.data[i].receiveDate):'';
						result.data[i].bonusDate = result.data[i].bonusDate ? v.getTime(result.data[i].bonusDate):'';
						result.data[i].userName = result.data[i].user.name;
						result.data[i].serviceName = '留学';
						if (result.data[i].settle)
						{
								result.data[i].strSettle = '是';
						}else
						{
								result.data[i].strSettle = '否';
						}
						result.data[i].schoolName = result.data[i].school.name;
						result.data[i].schoolSubject = result.data[i].school.subject;
						result.data[i].installmentDueDate = result.data[i].installmentDueDate ? v.getTime(result.data[i].installmentDueDate):'';
						v.total_expectamount += result.data[i].expectAmount;
						v.total_bonus += result.data[i].bonus;
						result.data[i].strState = return_state(result.data[i].state);
						result.data[i].currentState = result.data[i].state;
				};
				return result.data;
			}						
      
      function return_state(va)
			{
					var str_html = '';
					switch(va)
					{
						case 'PENDING':
									str_html = '佣金待确认';
						break;						
						case 'REVIEW':
									str_html = '佣金审核中';
						break;
						case 'WAIT':
									str_html = '<label style="">佣金被驳回</label>';
						break;
						case 'FINISH':									
									str_html = '<label style="color:blue;">佣金已审核</label>';							
						break;						
						case 'COMPLETE':
									str_html = '<label style="color:red;">佣金结算完成</label>';
						break;						
						case 'CLOSE':
									str_html = '<label style="color:red;">已关闭</label>';
						break;											
					}
					return str_html;
      }                    
			
			v.$watch('subject', function(obj) {
					$('.default-date-picker').datepicker({   				
				        format: 'dd/mm/yyyy'
				  });				 	
				  //查询客户
				  var user = $("#user_name");
				  user.autocompleter({
			    	highlightMatches: true,
			    	limit: 10,
			    	cache: false,
			    	customValue: 'name',
			    	customLabel: 'name',
			    	source: 'user/list?authNickname=&phone=&pageNum=0',
			    	combine: function(params) {
			    		return {
				        name: params.query,
				        pageSize: params.limit
				      };
			    	},
			    	callback: function(value, index, object) {
			    		$('#userId').val(object.id);
			    		v.userId = object.id;  		
			    	},
			    	minLength: 1						    	
			    });			    
			});
			
			function gotoUrl(va)
			{
					if (va == 'VISA')
					{
							window.location.href = "mycommission.html";
					}else
					{
							window.location.href = "mycommission-ovst.html";
					}
			}
			
			function open_detail(serviceId,orderId)
      {
      		show_commission_detail(serviceId,orderId);
      }
      
      function reqCommissionOvst(serviceId,orderId)
      {
      		edit_commission_detail(serviceId,orderId);
      }
      
      function flowstep(va,par)
      {
      		var str_url = "commissionOrder/approval";
      		if (par == '0' || va == 'WAIT') str_url = "commissionOrder/refuse";
      		
          var json = {};
          var closedReason = '';
                   
          json['id'] = v.orderId;
          json['state'] = va;
          $.post(str_url, json,
			   	function(data){
			   			if (data.code == 0)
			   			{
			   					$('#ovst_id #alert_success').css('marginLeft','30%');
			   					$('#ovst_id #alert_success').addClass('alert-success').show().delay(1500).fadeOut();
			   					setTimeout(function(){window.location.href = "mycommission-ovst.html";}, 2000);				   					
			   			}else
			   			{
			   					$('#ovst_id #alert_error').css('marginLeft','30%');
			   					$('#ovst_id #alert_error').addClass('alert-danger').show().delay(3000).fadeOut();
	          			$("#ovst_id #error_info").html(data.message);
		        			return false;
			   			}
			   	});
      }
      
      function show_knowledge_detail(id,parentId)
      {
      		sessionStorage.setItem("id", id);
      		sessionStorage.setItem("menu_parentid", parentId);
					window.location.href = "knowledge.html"; 
      }
			
			function  formatDate(now)
			{
			    var   now= new Date(now);     
			    var   year=now.getFullYear();     
			    var   month=now.getMonth()+1;     
			    var   date=now.getDate();     
			    var   hour=now.getHours();
			    var   minute=now.getMinutes();     
			    var   second=now.getSeconds();
			    return fixZero(date,2)+"/"+fixZero(month,2)+"/"+year;
			}  
			
			function fixZero(num,length)
			{     
			    var str=""+num;
			    var len=str.length;     var s="";
			    for(var i=length;i-->len;)
			    {         
			        s+="0";
			    }
			    return s+str;
			}
			
	    jQuery(document).ready(function() {
	    });
		</script>
	</body>

</html>