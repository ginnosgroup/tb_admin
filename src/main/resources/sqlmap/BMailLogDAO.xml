<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zhinanzhen.b.dao.MailLogDAO">

    <insert id="addMailLog" parameterType="org.zhinanzhen.b.dao.pojo.MailLogDO" useGeneratedKeys="true" keyProperty="id">
        INSERT
            INTO b_remind_logs (
                gmt_create,
                gmt_modify,
                code,
                mail,
                title,
                content)
            VALUES (
                now(),
                now(),
                #{code},
                #{mail},
                #{title},
                #{content});
    </insert>
    
    <select id="listMailLog" resultType="org.zhinanzhen.b.dao.pojo.MailLogDO">
        SELECT
            id,
            gmt_create,
            gmt_modify,
            code,
            mail,
            title,
            content
        FROM b_remind_logs
        ORDER BY gmt_create DESC;
     </select>
     
     <select id="getMailLogByCode" parameterType="java.lang.String" resultType="org.zhinanzhen.b.dao.pojo.MailLogDO">
        SELECT
            id,
            gmt_create,
            code,
            mail,
            title,
            content
        FROM b_remind_logs WHERE code = #{code};
    </select>
    
    <update id="refresh" parameterType="java.lang.Integer">
        UPDATE b_remind_logs SET gmt_modify = now() WHERE id = #{id};
    </update>

</mapper>
